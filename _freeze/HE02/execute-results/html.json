{
  "hash": "3a6eea0385e903ec5eea584b20153f3d",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Hands-on Exercise 2\"\nauthor: \"Teong Sze Ching\"\ndate: \"January 18, 2026\"\ndate-modified: \"last-modified\"\nexecute: \n  eval: true\n  echo: true\n  warning: false\n  freeze: true\n---\n\n# Lesson 2: Beyond ggplot2 Fundamentals\n\n## 1.0 Getting Started\nIn this chapter, several ggplot2 extensions will be introduced to create more elegant and effective statistical graphics.\n\nIn this exercise, beside tidyverse, four R packages will be used. They are:\n- ggrepel: an R package provides geoms for ggplot2 to repel overlapping text labels.\n- ggthemes: an R package provides some extra themes, geoms, and scales for ‘ggplot2’.\n- hrbrthemes: an R package provides typography-centric themes and theme components for ggplot2.\n- patchwork: an R package for preparing composite figure created using ggplot2.\n\nCode chunk below will be used to check if these packages have been installed and also will load them onto your working R environment.\n\n\n::: {.cell}\n\n```{.r .cell-code}\npacman::p_load(ggrepel, patchwork, ggthemes, tidyverse)\n```\n:::\n\n\nhrbrtheme will not be loaded because it is not available. Will use ggplot2 to replace it. Link: https://cran.r-project.org/web/packages/hrbrthemes/index.html\n\n# 2.0 The Data\nLoading the data to the R environment by using read_csv() function of readr package\n\n::: {.cell}\n\n```{.r .cell-code}\nexam_data <- read_csv(\"chap02/data/Exam_data.csv\")\n```\n:::\n\nThe data in the file includes (1)Year end examination grades of a cohort of primary 3 students from a local school. (2) There are a total of seven attributes. Four of them are categorical data type and the other three are in continuous data type. The categorical attributes are: ID, CLASS, GENDER and RACE. The continuous attributes are: MATHS, ENGLISH and SCIENCE.\n\n# 3.0 Visualization\n## 3.1 Without GGrepel\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(data=exam_data, aes(x=MATHS, y=ENGLISH)) + geom_point() + geom_smooth(method=lm, size=0.5) + geom_label(aes(label=ID), hjust=.5, vjust=-.5) + coord_cartesian(xlim=c(0,100), ylim=c(0,100)) + ggtitle(\"English scores versus Maths scores for Primary 3\")\n```\n\n::: {.cell-output-display}\n![](HE02_files/figure-html/unnamed-chunk-3-1.png){width=672}\n:::\n:::\n\n\n## 3.2 With GGrepel\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(data=exam_data, aes(x=MATHS, y=ENGLISH)) + geom_point() + geom_smooth(method=lm, size=0.5) + geom_label_repel(aes(label=ID), fontface=\"bold\") + coord_cartesian(xlim=c(0,100), ylim=c(0,100)) + ggtitle(\"English scores versus Maths scores for Primary 3\")\n```\n\n::: {.cell-output-display}\n![](HE02_files/figure-html/unnamed-chunk-4-1.png){width=672}\n:::\n:::\n\n\n## 3.3 Using GGplot2 theme\nggplot2 comes with eight built-in themes, they are: theme_gray(), theme_bw(), theme_classic(), theme_dark(), theme_light(), theme_linedraw(), theme_minimal(), and theme_void().\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(data=exam_data, aes(x=MATHS)) + geom_histogram(bins=20, boundary=100, color=\"grey25\", fill=\"grey90\") + theme_gray() + ggtitle(\"Distribution of Maths score\")\n```\n\n::: {.cell-output-display}\n![](HE02_files/figure-html/unnamed-chunk-5-1.png){width=672}\n:::\n:::\n\n\n### 3.3.1 Using theme_economist()\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(data=exam_data, aes(x=MATHS)) + geom_histogram(bins=20, boundary=100, color=\"grey25\", fill=\"grey90\") + theme_gray() + ggtitle(\"Distribution of Maths score\") + theme_economist()\n```\n\n::: {.cell-output-display}\n![](HE02_files/figure-html/unnamed-chunk-6-1.png){width=672}\n:::\n:::\n\n\n### 3.3.2 Using theme_minimal() from ggplot2 (replaced it with theme_ipsum() because this is not available in the current R version)\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(data=exam_data, aes(x=MATHS)) + geom_histogram(bins=20, boundary=100, color=\"grey25\", fill=\"grey90\") + theme_gray() + ggtitle(\"Distribution of Maths score\") + theme_minimal(base_size = 15, base_family=\"Arial\") + theme(axis.title = element_text(size = 18), panel.grid.major.x = element_blank())\n```\n\n::: {.cell-output-display}\n![](HE02_files/figure-html/unnamed-chunk-7-1.png){width=672}\n:::\n:::\n\n\n## 3.4 Using Composite graph\n### 3.4.1 1st Statistical Graph - Distribution of Maths score\n\n::: {.cell}\n\n```{.r .cell-code}\np1 <- ggplot(data=exam_data, aes(x=MATHS)) + geom_histogram(bins=20,boundary=100, color=\"grey25\", fill=\"grey90\") + coord_cartesian(xlim=c(0,100)) + ggtitle(\"Distribution of Maths scores\")\n```\n:::\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](HE02_files/figure-html/unnamed-chunk-9-1.png){width=672}\n:::\n:::\n\n\n### 3.4.2 2nd Statistical Graph - Distribution of English score\n\n::: {.cell}\n\n```{.r .cell-code}\np2 <- ggplot(data=exam_data, aes(x=ENGLISH)) + geom_histogram(bins=20, boundary=100, color=\"grey25\", fill=\"grey90\") + coord_cartesian(xlim=c(0,100)) + ggtitle(\"Distribution of English scores\")\n```\n:::\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](HE02_files/figure-html/unnamed-chunk-11-1.png){width=672}\n:::\n:::\n\n\n\n### 3.4.3 Combine 1st and 2nd graph - Scatterplot for English vs Maths score\n\n\n::: {.cell}\n\n```{.r .cell-code}\np3 <- ggplot(data=exam_data, aes(x=MATHS, y=ENGLISH)) + geom_point() + geom_smooth(method=lm, size=0.5) + coord_cartesian(xlim=c(0,100), ylim=c(0,100)) + ggtitle(\"English scores versus Maths scores for Primary 3\")\n```\n:::\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](HE02_files/figure-html/unnamed-chunk-13-1.png){width=672}\n:::\n:::\n\n\n#### 3.4.3.1 Creating scatterplot with insert\n\n::: {.cell}\n\n```{.r .cell-code}\ninsert_element <- patchwork::inset_element\np3 + insert_element(p2, left=0.02, bottom=0.7, right=0.5, top=1)\n```\n\n::: {.cell-output-display}\n![](HE02_files/figure-html/unnamed-chunk-14-1.png){width=672}\n:::\n:::\n\n\n### 3.4.4 Combine 2 ggplot2 graphs \n\n::: {.cell}\n\n```{.r .cell-code}\np1+p2\n```\n\n::: {.cell-output-display}\n![](HE02_files/figure-html/unnamed-chunk-15-1.png){width=672}\n:::\n:::\n\n\n### 3.4.5 Combine 3 or more ggplot2 graphs \nWe can plot more complex composite by using appropriate operators. For example, the composite figure below is plotted by using:\n\n“/” operator to stack two ggplot2 graphs,\n“|” operator to place the plots beside each other,\n“()” operator the define the sequence of the plotting.\n\n\n::: {.cell}\n\n```{.r .cell-code}\np1/p2 | p3\n```\n\n::: {.cell-output-display}\n![](HE02_files/figure-html/unnamed-chunk-16-1.png){width=1152}\n:::\n:::\n\n\n### 3.4.6 Creating a composite figure by using patchwork and ggtheme\n\n::: {.cell}\n\n```{.r .cell-code}\npatchwork <- (p1 / p2) | p3\npatchwork & theme_economist()\n```\n\n::: {.cell-output-display}\n![](HE02_files/figure-html/unnamed-chunk-17-1.png){width=1152}\n:::\n:::\n\n",
    "supporting": [
      "HE02_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}